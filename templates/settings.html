<!--
    Filename: settings.html
    Author: Bhuwan Shrestha, Alen Varghese, Shubh Soni, and Dev Patel
    Date: 2025-04-01
    Project: Handwritten OCR | Capstone Project 2025
    Course: Systems Project
    Description: This is the settings page for the Handwritten OCR project.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings - Handwritten OCR</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Lora:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --dark-bg: #2b2b2b;
        --light-bg: #f4ece6;
        --accent: #a68a64;
        --text-dark: #d4c9b0;
        --text-light: #4a3f35;
        --blend-color: #eceeea;
        --shadow: rgba(0, 0, 0, 0.3);
      }

      body {
        font-family: "Lora", serif;
        background: linear-gradient(
          to bottom,
          var(--light-bg),
          var(--blend-color)
        );
        color: var(--text-light);
        transition: all 0.3s ease;
        overflow-x: hidden;
      }
      body.dark-mode {
        background: linear-gradient(135deg, var(--dark-bg), #3e3e3e);
        color: var(--text-dark);
      }

      /* Navbar */
      nav {
        background: linear-gradient(
          to bottom,
          rgba(236, 238, 234, 0.95),
          rgba(236, 238, 234, 0.7)
        );
        padding: 1.75rem 2rem;
        position: sticky;
        top: 0;
        z-index: 1000;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        min-height: 80px;
      }
      body.dark-mode nav {
        background: linear-gradient(
          to bottom,
          rgba(40, 40, 40, 0.95),
          rgba(40, 40, 40, 0.7)
        );
        box-shadow: 0 2px 10px var(--shadow);
      }
      nav a,
      nav button {
        font-family: "Playfair Display", serif;
        font-weight: 700;
        color: var(--text-light);
        transition: color 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      body.dark-mode nav a,
      body.dark-mode nav button {
        color: var(--text-dark);
      }
      nav a:hover {
        color: var(--accent);
      }

      /* Container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
      }

      /* Header Section */
      .header-section {
        padding: 4rem 0;
        text-align: center;
      }
      h1 {
        font-family: "Playfair+Display", serif;
        font-size: 2.75rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--text-light);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      body.dark-mode h1 {
        color: var(--text-dark);
      }
      p.subtitle {
        font-size: 1.125rem;
        max-width: 700px;
        margin: 0 auto;
        color: var(--text-light);
      }
      body.dark-mode p.subtitle {
        color: var(--text-dark);
      }

      /* Result Card */
      .result-card {
        background: rgba(236, 238, 234, 0.9);
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(0, 0, 0, 0.05);
        transition: transform 0.3s ease;
        margin-bottom: 2rem;
      }
      body.dark-mode .result-card {
        background: rgba(50, 50, 50, 0.9);
        box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      }
      body.dark-mode .result-card:hover {
        box-shadow: 0 8px 16px rgba(236, 238, 234, 0.3);
      }

      /* Buttons */
      .button {
        padding: 0.75rem 2rem;
        background: var(--accent);
        color: #fff;
        border: none;
        border-radius: 25px;
        font-family: "Lora", serif;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin: 0.5rem;
      }
      body.dark-mode .button {
        background: var(--blend-color);
        color: var(--dark-bg);
      }
      .button:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 15px var(--shadow);
      }

      /* Switch Toggle */
      .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
      }
      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 34px;
      }
      .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }
      input:checked + .slider {
        background-color: #4caf50;
      }
      input:checked + .slider:before {
        transform: translateX(26px);
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1000;
      }
      .modal-content {
        background: rgba(236, 238, 234, 0.9);
        margin: 15% auto;
        padding: 20px;
        border-radius: 12px;
        width: 70%;
        max-width: 500px;
        position: relative;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
      body.dark-mode .modal-content {
        background: rgba(50, 50, 50, 0.9);
        box-shadow: 0 4px 8px rgba(255, 255, 255, 0.2);
      }
      .close {
        color: var(--text-light);
        float: right;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
      }
      body.dark-mode .close {
        color: var(--text-dark);
      }
      .close:hover {
        color: var(--accent);
      }

      /* Footer */
      footer {
        background: linear-gradient(
          to top,
          rgba(236, 238, 234, 0.95),
          rgba(236, 238, 234, 0.7)
        );
        padding: 2rem;
        margin-top: 6rem;
        position: relative;
        text-align: center;
      }
      footer::before {
        content: "";
        position: absolute;
        top: -2rem;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(
          to right,
          transparent,
          var(--accent),
          transparent
        );
      }
      body.dark-mode footer {
        background: linear-gradient(
          to top,
          rgba(40, 40, 40, 0.95),
          rgba(40, 40, 40, 0.7)
        );
      }
      body.dark-mode footer::before {
        background: linear-gradient(
          to right,
          transparent,
          var(--blend-color),
          transparent
        );
      }
      footer a {
        color: var(--accent);
        margin: 0 1rem;
        transition: color 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        position: relative;
        text-decoration: none;
      }
      body.dark-mode footer a {
        color: var(--blend-color);
      }
      footer a:hover {
        color: var(--accent);
      }
      footer a::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -2px;
        left: 0;
        background-color: var(--accent);
        transition: width 0.3s ease;
      }
      body.dark-mode footer a::after {
        background-color: var(--blend-color);
      }
      footer a:hover::after {
        width: 100%;
      }
      footer a i {
        transition: transform 0.5s ease;
      }
      footer a:hover i {
        animation: rotate 1s linear infinite;
      }
      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body class="light-mode">
    <!-- Navigation Bar -->
    <nav class="text-white">
      <div class="container flex justify-between items-center">
        <a href="{{ url_for('upload_file') }}" class="text-xl"
          ><i class="fas fa-pen-nib"></i> Handwritten Text Recognition</a
        >
        <div class="flex items-center space-x-6">
          <a href="{{ url_for('upload_file') }}"
            ><i class="fas fa-home"></i> Home</a
          >
          <a href="{{ url_for('history') }}"
            ><i class="fas fa-history"></i> History</a
          >
          <a href="{{ url_for('about') }}"
            ><i class="fas fa-info-circle"></i> About</a
          >
          <a href="{{ url_for('contact') }}"
            ><i class="fas fa-envelope"></i> Contact</a
          >
          <a href="{{ url_for('references') }}"
            ><i class="fas fa-code"></i> References</a
          >
          <a href="{{ url_for('settings') }}"
            ><i class="fas fa-cog"></i> Settings</a
          >
          <a href="{{ url_for('logout') }}"
            ><i class="fas fa-sign-out-alt"></i> Logout</a
          >
          <button id="themeToggle" class="focus:outline-none">
            <i class="fas fa-moon"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Header Section -->
    <div class="header-section container">
      <h1><i class="fas fa-cog"></i> Settings</h1>
      <p class="text-sm mb-2">
        Customize your experience and secure your account
      </p>
      <p class="subtitle">
        Manage your profile, security, and preferences below.
      </p>
    </div>

    <!-- Settings Section -->
    <div class="container">
      <!-- Profile Settings -->
      <div class="result-card mb-6">
        <h3 class="text-xl font-bold mb-4">Profile Settings</h3>
        <p class="mb-2"><strong>Username:</strong> {{ username }}</p>
        <p class="mb-4"><strong>Email:</strong> {{ gmail }}</p>
        <form method="post" action="/update_profile" class="space-y-4">
          <div class="mb-2">
            <label for="username" class="block text-sm font-medium mb-1"
              >Change Username</label
            >
            <input
              type="text"
              id="username"
              name="username"
              placeholder="New Username"
              class="w-full p-2 border rounded-lg bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="mb-2">
            <label for="email" class="block text-sm font-medium mb-1"
              >Change Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              placeholder="New Email"
              class="w-full p-2 border rounded-lg bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>

          <div class="mb-2">
            <label for="password" class="block text-sm font-medium mb-1"
              >Change Password</label
            >
            <div class="relative">
              <input
                type="password"
                id="password"
                name="password"
                placeholder="New Password"
                class="w-full p-2 border rounded-lg bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <button
                type="button"
                id="togglePassword"
                class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm"
                onclick="togglePasswordVisibility()"
              >
                <i class="fas fa-eye"></i>
              </button>
            </div>
          </div>

          <button type="submit" class="button">
            <i class="fas fa-save mr-2"></i> Save Changes
          </button>
        </form>
      </div>

      <!-- Security Settings -->
      <div class="result-card mb-6">
        <h3 class="text-xl font-bold mb-4">Security Settings</h3>
        <div class="space-y-4">
          <div>
            <label class="flex items-center">
              <span class="mr-4">Enable Two-Factor Authentication (2FA)</span>
              <label class="switch">
                <input type="checkbox" id="2fa-toggle" onchange="toggle2FA()" />
                <span class="slider"></span>
              </label>
            </label>
            <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">
              Adds an extra layer of security with a code sent to your email.
            </p>
          </div>
          <button onclick="openModal('session-modal')" class="button">
            <i class="fas fa-sign-out-alt mr-2"></i> Manage Active Sessions
          </button>
        </div>
      </div>

      <!-- Privacy Settings -->
      <div class="result-card mb-6">
        <h3 class="text-xl font-bold mb-4">Privacy Settings</h3>
        <div class="space-y-4">
          <label class="flex items-center">
            <span class="mr-4">Allow Data Analytics</span>
            <label class="switch">
              <input
                type="checkbox"
                id="analytics-toggle"
                onchange="toggleAnalytics()"
              />
              <span class="slider"></span>
            </label>
          </label>
          <p class="text-sm text-gray-600 dark:text-gray-300 mt-2">
            Opt-in to help improve our service with anonymous usage data.
          </p>
        </div>
      </div>

      <!-- Preferences -->
      <div class="result-card mb-6">
        <h3 class="text-xl font-bold mb-4">Preferences</h3>
        <div class="space-y-4">
          <select
            id="language"
            class="p-2 border rounded-lg bg-white dark:bg-gray-700 w-full"
            onchange="updateLanguage()"
          >
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
          </select>
          <label class="flex items-center">
            <span class="mr-4">Enable Notifications</span>
            <label class="switch">
              <input
                type="checkbox"
                id="notifications-toggle"
                onchange="toggleNotifications()"
              />
              <span class="slider"></span>
            </label>
          </label>
        </div>
      </div>

      <!-- Activity Log -->
      <div class="result-card mb-6">
        <h3 class="text-xl font-bold mb-4">Activity Log</h3>
        <div class="space-y-4">
          <p class="text-sm text-gray-600 dark:text-gray-300">
            Download a record of all your activities on the platform. This log
            contains details about your logins, uploads, translations, and other
            interactions with the system.
          </p>
          <a
            href="{{ url_for('download_activity_log') }}"
            class="button inline-block"
          >
            <i class="fas fa-download mr-2"></i> Download Activity Log
          </a>
        </div>
      </div>

      <!-- Security Matters Section -->
      <div class="result-card mb-6">
        <h3 class="text-xl font-bold mb-4">Why Security Matters</h3>
        <div class="text-gray-700 dark:text-gray-300 leading-relaxed">
          <p class="mb-4">
            At Handwritten OCR, we prioritize your security because your trust
            is our foundation. In an era where cyber threats like data breaches
            and identity theft are rampant, protecting your personal
            information—such as your uploaded documents and account details—is
            paramount. We care about your security because:
          </p>
          <ul class="list-disc pl-5 mb-4">
            <li>
              <strong>Privacy Protection:</strong> Your handwritten notes and
              sensitive data deserve confidentiality, and we employ encryption
              to safeguard them.
            </li>
            <li>
              <strong>Account Safety:</strong> Unauthorized access can lead to
              misuse; features like Two-Factor Authentication (2FA) ensure only
              you control your account.
            </li>
            <li>
              <strong>Continuous Improvement:</strong> By staying vigilant
              against emerging threats, we enhance our platform to offer a
              secure experience.
            </li>
          </ul>
          <p>
            We use industry-standard security protocols, regular audits, and
            your feedback to maintain a robust defense. Your security is not
            just a feature—it's our commitment.
          </p>
        </div>
      </div>
    </div>

    <!-- Modal for Session Management -->
    <div id="session-modal" class="modal">
      <div class="modal-content">
        <span class="close" onclick="closeModal('session-modal')">&times;</span>
        <h3 class="text-xl font-bold mb-4">Active Sessions</h3>
        <p class="mb-4">Manage devices logged into your account:</p>
        <ul class="list-disc pl-5 mb-4">
          <!-- Sessions will be loaded dynamically via JavaScript -->
        </ul>
        <button class="button" onclick="loadActiveSessions()">
          <i class="fas fa-sync-alt mr-2"></i> Refresh
        </button>
        <button class="button" onclick="closeModal('session-modal')">
          Close
        </button>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="container">
        <p class="font-bold"><i class="fas fa-pen-nib"></i> Handwritten OCR</p>
        <div class="flex flex-wrap justify-center gap-6 mt-4">
          <a href="{{ url_for('about') }}"
            ><i class="fas fa-info-circle"></i> About</a
          >
          <a href="https://facebook.com" target="_blank"
            ><i class="fab fa-facebook"></i> Facebook</a
          >
          <a href="https://github.com" target="_blank"
            ><i class="fab fa-github"></i> GitHub</a
          >
          <a href="https://instagram.com" target="_blank"
            ><i class="fab fa-instagram"></i> Instagram</a
          >
          <a href="https://twitter.com" target="_blank"
            ><i class="fab fa-twitter"></i> Twitter</a
          >
          <a
            href="/cdn-cgi/l/email-protection#d5e6e0e5e5fae7e1d5fdf4fbf1e2e7fce1e1f0fbfaf6e7bbf6faf8"
            ><i class="fas fa-envelope"></i> Gmail</a
          >
          <a href="https://linkedin.com" target="_blank"
            ><i class="fab fa-linkedin"></i> LinkedIn</a
          >
          <a href="{{ url_for('contact') }}"
            ><i class="fas fa-phone"></i> Contact Us</a
          >
        </div>
        <p class="text-sm mt-4">
          Developed by Bhuwan Shrestha, Alen Varghese, Shubh Soni, and Dev
          Patel.<br />© 2025 Handwritten OCR. All Rights Reserved.
        </p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script
      data-cfasync="false"
      src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"
    ></script>
    <script>
      // Theme Toggle
      const themeToggle = document.getElementById("themeToggle");
      const body = document.body;
      themeToggle.addEventListener("click", () => {
        body.classList.toggle("light-mode");
        body.classList.toggle("dark-mode");
        themeToggle.querySelector("i").classList.toggle("fa-sun");
        themeToggle.querySelector("i").classList.toggle("fa-moon");
        localStorage.setItem(
          "theme",
          body.classList.contains("dark-mode") ? "dark" : "light"
        );
      });

      // Toggle password visibility
      function togglePasswordVisibility() {
        const passwordInput = document.getElementById('password');
        const toggleButton = document.getElementById('togglePassword');

        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          toggleButton.innerHTML = '<i class="fas fa-eye-slash"></i>';
        } else {
          passwordInput.type = 'password';
          toggleButton.innerHTML = '<i class="fas fa-eye"></i>';
        }
      }

      // Load saved theme
      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          body.classList.remove("light-mode");
          body.classList.add("dark-mode");
          themeToggle.querySelector("i").classList.remove("fa-moon");
          themeToggle.querySelector("i").classList.add("fa-sun");
        }

        // Set initial toggle states
        document.getElementById("2fa-toggle").checked = {{ twofa_enabled|lower }};
        document.getElementById("analytics-toggle").checked = {{ analytics_enabled|lower }};
        document.getElementById("notifications-toggle").checked = {{ notifications_enabled|lower }};
        document.getElementById("language").value = "{{ language }}";

        // Load active sessions
        loadActiveSessions();
      });

      // Modal Functions
      function openModal(modalId) {
        document.getElementById(modalId).style.display = "block";
      }

      function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
      }

      // Toggle 2FA
      function toggle2FA() {
        const isEnabled = document.getElementById("2fa-toggle").checked;

        fetch('/toggle_2fa', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ enabled: isEnabled }),
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showAlert(`Two-factor authentication ${isEnabled ? 'enabled' : 'disabled'} successfully.`);
          } else {
            showAlert('Failed to update two-factor authentication setting.', 'error');
            // Revert toggle if failed
            document.getElementById("2fa-toggle").checked = !isEnabled;
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('An error occurred. Please try again.', 'error');
          // Revert toggle if failed
          document.getElementById("2fa-toggle").checked = !isEnabled;
        });
      }

      // Toggle Analytics
      function toggleAnalytics() {
        const isEnabled = document.getElementById("analytics-toggle").checked;

        fetch('/toggle_analytics', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ enabled: isEnabled }),
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showAlert(`Data analytics ${isEnabled ? 'enabled' : 'disabled'} successfully.`);
          } else {
            showAlert('Failed to update data analytics setting.', 'error');
            // Revert toggle if failed
            document.getElementById("analytics-toggle").checked = !isEnabled;
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('An error occurred. Please try again.', 'error');
          // Revert toggle if failed
          document.getElementById("analytics-toggle").checked = !isEnabled;
        });
      }

      // Toggle Notifications
      function toggleNotifications() {
        const isEnabled = document.getElementById("notifications-toggle").checked;

        fetch('/toggle_notifications', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ enabled: isEnabled }),
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showAlert(`Notifications ${isEnabled ? 'enabled' : 'disabled'} successfully.`);
          } else {
            showAlert('Failed to update notifications setting.', 'error');
            // Revert toggle if failed
            document.getElementById("notifications-toggle").checked = !isEnabled;
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('An error occurred. Please try again.', 'error');
          // Revert toggle if failed
          document.getElementById("notifications-toggle").checked = !isEnabled;
        });
      }

      // Update Language
      function updateLanguage() {
        const language = document.getElementById("language").value;

        fetch('/update_language', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ language: language }),
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showAlert(`Language updated to ${getLanguageName(language)}.`);
          } else {
            showAlert('Failed to update language setting.', 'error');
            // Revert selection if failed
            document.getElementById("language").value = "{{ language }}";
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('An error occurred. Please try again.', 'error');
          // Revert selection if failed
          document.getElementById("language").value = "{{ language }}";
        });
      }

      // Helper function to get language name from code
      function getLanguageName(code) {
        const languages = {
          'en': 'English',
          'es': 'Spanish',
          'fr': 'French'
        };
        return languages[code] || code;
      }

      // Load active sessions
      function loadActiveSessions() {
        fetch('/get_active_sessions')
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            const sessionsList = document.querySelector('#session-modal ul');
            sessionsList.innerHTML = ''; // Clear existing sessions

            if (data.sessions.length === 0) {
              sessionsList.innerHTML = '<li>No active sessions found.</li>';
            } else {
              data.sessions.forEach(session => {
                const li = document.createElement('li');
                li.innerHTML = `
                  Device - IP: ${session.ip_address} - Last Active: ${session.last_active}
                  <button
                    class="button"
                    style="padding: 0.5rem 1rem; font-size: 0.875rem"
                    onclick="terminateSession(${session.id})"
                  >
                    Terminate
                  </button>
                `;
                sessionsList.appendChild(li);
              });
            }
          } else {
            showAlert('Failed to load active sessions.', 'error');
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('An error occurred while loading sessions.', 'error');
        });
      }

      // Terminate session
      function terminateSession(sessionId) {
        fetch(`/terminate_session/${sessionId}`, {
          method: 'POST',
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            showAlert('Session terminated successfully.');
            loadActiveSessions(); // Reload the sessions list
          } else {
            showAlert('Failed to terminate session.', 'error');
          }
        })
        .catch(error => {
          console.error('Error:', error);
          showAlert('An error occurred. Please try again.', 'error');
        });
      }

      // Show alert message
      function showAlert(message, type = 'success') {
        // Create alert element
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type}`;
        alertDiv.style.position = 'fixed';
        alertDiv.style.top = '20px';
        alertDiv.style.right = '20px';
        alertDiv.style.padding = '10px 20px';
        alertDiv.style.borderRadius = '5px';
        alertDiv.style.zIndex = '9999';

        if (type === 'success') {
          alertDiv.style.backgroundColor = '#dff0d8';
          alertDiv.style.color = '#3c763d';
          alertDiv.style.borderColor = '#d6e9c6';
        } else {
          alertDiv.style.backgroundColor = '#f2dede';
          alertDiv.style.color = '#a94442';
          alertDiv.style.borderColor = '#ebccd1';
        }

        alertDiv.textContent = message;
        document.body.appendChild(alertDiv);

        // Remove after 3 seconds
        setTimeout(() => {
          alertDiv.style.opacity = '0';
          alertDiv.style.transition = 'opacity 0.5s';
          setTimeout(() => {
            document.body.removeChild(alertDiv);
          }, 500);
        }, 3000);
      }

      // Close modal on outside click
      window.onclick = function (event) {
        const modal = document.getElementById("session-modal");
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };
    </script>
  </body>
</html>
